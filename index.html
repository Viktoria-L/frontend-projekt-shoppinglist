<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mina listor</title>
    <link rel="stylesheet" href="css/pages/index.css">
    <link rel="stylesheet" href="css/default.css">
    <link rel="stylesheet" href="css/variables.css">
    <script src="main.js" defer></script>
</head>
<body>
    <header>
        <div class="headerLogoSettings">
            <img src="assets/logo.svg" alt="">
            <a href=""><img src="assets/gear.svg" alt=""></a>
        </div>
        <div class="headerNameEdit">
            <h1>My shopping list</h1>
            <button><img src="assets/three-dots-vertical.svg" alt=""></button>
        </div>
        <hr>
    </header>
    <main>
		<content class="item-container" id="list-output"></content>
		<!--
		ITEM STRUCTURE
		<div>
			<h2>List title</h2>
			<ul>
				<li>
					<input type="checkbox">
					<input type="text">
				</li>
				...
			</ul>
		</div>
		-->	
    	<script type="text/javascript">
    		const outputElement = document.querySelector('#list-output');
    		let result = '';

			function display(outputArray) {
				console.log(outputArray);

				for (let i = 0; i < outputArray.length; i++) {
					let list = outputArray[i];
					let listName = list.listname || '???'
					let children = list.itemList

					let isNotArray = !Array.isArray(children)
					if (isNotArray) {continue;}

					result += `
					<div>
						<h2 class="list-title">${listName}</h2>
						<ul>
					`
					children.forEach((item) => {
						let checkedText = item.checked && 'checked' || ''
						let itemName = item.title || '???'

						result += `
							<li>
								<input type="checkbox" ${checkedText}>
								<input type="text" value="${itemName}">
							</li>
						`
					})

					result += `
						</ul>
					</div>
					`
				}
				console.log(outputElement);
				outputElement.innerHTML = result;
				//json = JSON.stringify(outputObj);
				//output.innerHTML = json;
			}

			fetch('https://nackademin-item-tracker.herokuapp.com/lists')
				.then((response) => response.json())
				.then(display);

    	</script>
    </main>
    <footer></footer>
    
</body>
</html>